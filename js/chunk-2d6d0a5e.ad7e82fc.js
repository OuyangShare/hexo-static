(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d6d0a5e"],{"7ad2":function(t,e,a){"use strict";var l=a("7c5a"),r=a.n(l);r.a},"7c5a":function(t,e,a){},"7db0":function(t,e,a){"use strict";var l=a("23e7"),r=a("b727").find,o=a("44d2"),n=a("ae40"),s="find",i=!0,c=n(s);s in[]&&Array(1)[s]((function(){i=!1})),l({target:"Array",proto:!0,forced:i||!c},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},e55d:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showCharts,expression:"showCharts"}],staticClass:"charts"}),a("el-form",{ref:"form",attrs:{size:"small",model:t.form,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"时间",prop:"cycleDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:"",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:t.cycleDate,callback:function(e){t.cycleDate=e},expression:"cycleDate"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"id",prop:"id"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"planid",prop:"planid"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.planid,callback:function(e){t.$set(t.form,"planid",e)},expression:"form.planid"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"name",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"source",prop:"source"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.source,callback:function(e){t.$set(t.form,"source",e)},expression:"form.source"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"description",prop:"description"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"version",prop:"version"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.version,callback:function(e){t.$set(t.form,"version",e)},expression:"form.version"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"owner",prop:"owner"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.owner,callback:function(e){t.$set(t.form,"owner",e)},expression:"form.owner"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"status",prop:"status"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"type",prop:"type"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"creator",prop:"creator"}},[a("el-input",{attrs:{clearable:""},model:{value:t.form.creator,callback:function(e){t.$set(t.form,"creator",e)},expression:"form.creator"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getPlanList}},[t._v("点击查询")])],1)],1)],1)],1),a("div",{staticStyle:{"margin-bottom":"15px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.cogradient}},[t._v("同步数据")]),a("el-button",{attrs:{size:"small",disabled:!this.multipleSelection.length,type:"success"},on:{click:t.getCountDate}},[t._v("生成统计数据")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{size:"small","max-height":"550px",data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"id"}}),a("el-table-column",{attrs:{prop:"planid",label:"planid"}}),a("el-table-column",{attrs:{prop:"name",label:"name"}}),a("el-table-column",{attrs:{prop:"source",label:"source"}}),a("el-table-column",{attrs:{prop:"description",label:"description","min-width":"200px"}}),a("el-table-column",{attrs:{prop:"version",label:"version"}}),a("el-table-column",{attrs:{prop:"owner",sortable:"",label:"owner","min-width":"100px"}}),a("el-table-column",{attrs:{prop:"status",sortable:"",label:"status","min-width":"100px"}}),a("el-table-column",{attrs:{prop:"type",label:"type"}}),a("el-table-column",{attrs:{prop:"startDate",label:"startDate"}}),a("el-table-column",{attrs:{prop:"endDate",label:"endDate"}}),a("el-table-column",{attrs:{prop:"creator",label:"creator"}}),a("el-table-column",{attrs:{prop:"",fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.cogradientResult(l)}}},[t._v("同步测试结果")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right",margin:"20px 0"},attrs:{"current-page":t.page,"page-sizes":[5,10,20,30,50],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.initTableData.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},r=[],o=(a("7db0"),a("4160"),a("a630"),a("fb6a"),a("b680"),a("3ca3"),a("159b"),a("bc3a")),n=a.n(o),s=a("313e"),i=a("5a0c"),c={components:{},data:function(){return{dayjs:i,multipleSelection:[],tableData:[],initTableData:[],page:1,limit:5,form:{id:"",planid:"",name:"",source:"",description:"",version:"",owner:"",status:"",type:"",startDate:"",endDate:"",creator:""},showCharts:!1}},computed:{cycleDate:{get:function(){return[this.form.startDate,this.form.endDate]},set:function(t){t?(this.form.startDate=this.dayjs(t[0]).format("YYYY-MM-DD HH:mm:ss"),this.form.endDate=this.dayjs(t[1]).format("YYYY-MM-DD HH:mm:ss")):(this.form.startDate="",this.form.endDate="")}}},methods:{handleSizeChange:function(t){this.page=1,this.limit=t,this.checkTableData()},handleCurrentChange:function(t){this.page=t,this.checkTableData()},checkTableData:function(){this.tableData=this.initTableData.slice((this.page-1)*this.limit,(this.page-1)*this.limit+this.limit)},handleSelectionChange:function(t){this.multipleSelection=t},cogradient:function(){n.a.post("/api/plan/addPlan").then((function(t){console.log(t)}))},getCountDate:function(){var t=this;n.a.post("/api/case/caseReport",{planads:Array.from(this.multipleSelection,(function(t){return t.planid}))}).then((function(e){console.log(e);var a=e.data.data,l=[],r=[],o=[];a.forEach((function(t,e){l[e]=(100*(t.ratemode.find((function(t){return 0===t.type}))||{}).passRate).toFixed(2),r[e]=(100*(t.ratemode.find((function(t){return 1===t.type}))||{}).passRate).toFixed(2),o[e]=(100*(t.ratemode.find((function(t){return 2===t.type}))||{}).passRate).toFixed(2)}));var n=s["a"](document.getElementsByClassName("charts")[0]);n.setOption({title:{text:"测试报告"},legend:{data:["冒烟测试通过率","第一轮测试通过率","第二轮测试通过率"]},tooltip:{},xAxis:{data:Array.from(a,(function(t){return t.versionName}))},yAxis:{type:"value",name:"通过率",min:0,max:100,position:"left",axisLabel:{formatter:"{value} %"}},series:[{name:"冒烟测试通过率",color:"red",type:"bar",data:l,label:{show:!0,position:"top",valueAnimation:!0}},{name:"第一轮测试通过率",color:"yellow",type:"bar",data:r,label:{show:!0,position:"top",valueAnimation:!0}},{name:"第二轮测试通过率",color:"green",type:"bar",data:o,label:{show:!0,position:"top",valueAnimation:!0}}]}),t.showCharts=!0}))},cogradientResult:function(t){var e=this,a=t.row;n.a.post("/api/case/caseResult",{id:a.planid}).then((function(t){e.getPlanList(),console.log(t)}))},getPlanList:function(){var t=this;n.a.post("/api/plan/ListPlan",this.form).then((function(e){console.log(e),t.initTableData=e.data.data,t.page=1,t.checkTableData()}))}},mounted:function(){this.getPlanList()}},p=c,m=(a("7ad2"),a("2877")),u=Object(m["a"])(p,l,r,!1,null,"f444388e",null);e["default"]=u.exports},fb6a:function(t,e,a){"use strict";var l=a("23e7"),r=a("861d"),o=a("e8b5"),n=a("23cb"),s=a("50c4"),i=a("fc6a"),c=a("8418"),p=a("b622"),m=a("1dde"),u=a("ae40"),d=m("slice"),f=u("slice",{ACCESSORS:!0,0:0,1:2}),b=p("species"),h=[].slice,g=Math.max;l({target:"Array",proto:!0,forced:!d||!f},{slice:function(t,e){var a,l,p,m=i(this),u=s(m.length),d=n(t,u),f=n(void 0===e?u:e,u);if(o(m)&&(a=m.constructor,"function"!=typeof a||a!==Array&&!o(a.prototype)?r(a)&&(a=a[b],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return h.call(m,d,f);for(l=new(void 0===a?Array:a)(g(f-d,0)),p=0;d<f;d++,p++)d in m&&c(l,p,m[d]);return l.length=p,l}})}}]);
//# sourceMappingURL=chunk-2d6d0a5e.ad7e82fc.js.map