<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>摄像头视频获取示例</title>
</head>
<body>
    <video id="videoElement" autoplay></video>
    <canvas id="canvasElement"></canvas>

    <script>
        const videoElement = document.getElementById('videoElement');
        const canvasElement = document.getElementById('canvasElement');
        const context = canvasElement.getContext('2d');

        async function startCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                videoElement.srcObject = stream;
                
            } catch (error) {
                console.error('访问摄像头出错：', error);
            }
        }
        const a = 0;
        function processVideoFrame() {
            context.drawImage(videoElement, 0, 0, canvasElement.width, canvasElement.height);
            console.log('-------------');
            console.log(videoElement.srcObject);
            if(videoElement.srcObject && a==0) {
                alert("嘤嘤嘤")
                ++a;
            }
            // 在这里可以添加更多的处理操作，例如图像滤镜、人脸识别等
            requestAnimationFrame(processVideoFrame);
        }

        // 开始获取摄像头视频流
        startCamera();

        // 开始处理视频帧
        processVideoFrame();
    </script>
</body>
</html>
